import{k as y,j as t,r,i as S,B as p}from"./index-50ad91ff.js";import{P as T}from"./PageBreadcrumb-2adbd738.js";import{S as v}from"./Spinner-57400a8f.js";import"./Table-9e7095d0.js";import{c as d}from"./category-f2587abd.js";import{R as h}from"./Row-a90e51f1.js";import{C as x}from"./Col-6e802f16.js";import{C as f}from"./Card-4e1bc556.js";import{F as o}from"./Form-57b1e97c.js";import{B as g}from"./Button-cbb264fd.js";import"./Anchor-ceb627db.js";import"./Button-825b6efb.js";import"./index-8b12ee39.js";import"./createWithBsPrefix-d4ec82c8.js";import"./divWithClassName-189ef379.js";const w=()=>{const[n,j]=r.useState(!1),[l,m]=r.useState(""),[C,b]=r.useState(""),[u,c]=r.useState(!1),{slug:i}=y(),B=S();r.useEffect(()=>{(async()=>{if(i)try{const s=await d.getCategoryDetails(i);(s==null?void 0:s.code)===200&&(b(s.data.id),m(s.data.name))}catch(s){console.error("Error fetching category:",s)}})()},[i]);const N=async a=>{if(a.currentTarget.checkValidity()===!1)a.preventDefault(),a.stopPropagation();else{a.preventDefault(),c(!0);try{const e=i?await d.updateCategory({name:l},C):await d.addCategory({name:l});console.log("res",e==null?void 0:e.code),(e==null?void 0:e.code)===200?(c(!1),p.success(e==null?void 0:e.message),B("/business-type/list")):((e==null?void 0:e.code)===400||(e==null?void 0:e.code)===401)&&p.error(e==null?void 0:e.message)}finally{c(!1)}}j(!0)};return t.jsx(f,{children:t.jsx(f.Body,{children:t.jsxs(o,{noValidate:!0,validated:n,onSubmit:N,children:[t.jsx(h,{children:t.jsx(x,{lg:12,children:t.jsxs(o.Group,{className:"mb-3",children:[t.jsx(o.Label,{children:"Name"}),t.jsx(o.Control,{type:"text",id:"validationCustom01",placeholder:"Business Type Name",name:"businessTypeName",value:l,onChange:a=>m(a.target.value),required:!0}),t.jsx(o.Control.Feedback,{type:"invalid",children:"Please fill the Business Type Name."})]})})}),u?t.jsxs(g,{variant:"primary",disabled:!0,children:[t.jsx(v,{className:"spinner-border-sm",tag:"span",color:"white"})," ","Loading..."]}):t.jsx(g,{variant:"primary",type:"submit",disabled:u,children:"Submit"})]})})})},K=()=>{const{slug:n}=y();return t.jsxs(t.Fragment,{children:[t.jsx(T,{title:n?"Edit Business Type":"Add Business Type",subName:"Business Type"}),t.jsx(h,{children:t.jsx(x,{lg:12,children:t.jsx(w,{})})})]})};export{K as default};
