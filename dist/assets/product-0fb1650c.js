import{H as u,r as g,B as c}from"./index-50ad91ff.js";import{o as E}from"./option-e755a7ae.js";import{c as x}from"./category-f2587abd.js";import{S as D}from"./sweetalert2.all-c3a7603a.js";function W(){return{addSubCategory:a=>u.post("/sub-category",a),getSubCategoryList:a=>u.get(`/sub-category?page=${a.page}&sortBy=${a.sortBy}&limit=${a.limit}&searchBy=${a.searchBy}&status=${a.status}`),getCategoryListWithOutPagination:a=>u.get(`/sub-category/list/dropdown?searchBy=${a.searchBy}&status=${a.status}&categoryId=${a.categoryId}`),getSubCategoryDetails:a=>u.get("/sub-category/slug/"+a),updateSubCategory:(a,i)=>u.patch("/sub-category/"+i,a)}}const V=W();function H(){return{addProduct:a=>u.post("/product",a),getProductList:a=>u.get(`/product?page=${a.page}&sortBy=${a.sortBy}&limit=${a.limit}&searchBy=${a.searchBy}&status=${a.status}`),getProductListWithOutPagination:a=>u.get(`/product/list/dropdown?searchBy=${a.searchBy}&status=${a.status}`),getProductDetails:a=>u.get("/product/slug/"+a),updateProduct:(a,i)=>u.patch("/product/"+i,a)}}const f=H();function U(){const[a,i]=g.useState(!1),[h,m]=g.useState([]),[L,S]=g.useState([]),[B,C]=g.useState([]),[P,$]=g.useState([]),[b,A]=g.useState(1),w=async(s,n)=>{i(!0);try{const t=await x.getCategoryListWithOutPagination({searchBy:s,status:n});if((t==null?void 0:t.code)==200){if(Array.isArray(t==null?void 0:t.data)){const o=t==null?void 0:t.data.map(e=>({label:e.name,value:e.id}));m(o)}}else(t==null?void 0:t.code)===400||(t==null?void 0:t.code)===401?c.error(t==null?void 0:t.message):c.error(t==null?void 0:t.message)}catch{c.error("Error fetching categories")}finally{i(!1)}},v=async(s,n,t)=>{i(!0);try{const o=await V.getCategoryListWithOutPagination({searchBy:s,status:n,categoryId:t});if((o==null?void 0:o.code)==200){if(Array.isArray(o==null?void 0:o.data)){const e=o==null?void 0:o.data.map(d=>({label:d.name,value:d.id}));S(e)}}else(o==null?void 0:o.code)===400||(o==null?void 0:o.code)===401?c.error(o==null?void 0:o.message):c.error(o==null?void 0:o.message)}catch{c.error("Error fetching categories")}finally{i(!1)}},O=async(s,n)=>{i(!0);try{const t=await E.getVariationListWithOutPagination({searchBy:s,status:n});if((t==null?void 0:t.code)==200){if(Array.isArray(t==null?void 0:t.data)){const o=t==null?void 0:t.data.map(e=>({label:e.name,value:e.id}));C(o)}}else(t==null?void 0:t.code)===400||(t==null?void 0:t.code)===401?c.error(t==null?void 0:t.message):c.error(t==null?void 0:t.message)}catch{c.error("Error fetching categories")}finally{i(!1)}},l=async({page:s,sortBy:n,limit:t,searchBy:o,status:e})=>{var d,y,p;i(!0);try{const r=await f.getProductList({page:s,sortBy:n,limit:t,searchBy:o,status:e});(r==null?void 0:r.code)==200?(A((d=r==null?void 0:r.data)==null?void 0:d.totalPages),Array.isArray((y=r==null?void 0:r.data)==null?void 0:y.docs)?$((p=r==null?void 0:r.data)==null?void 0:p.docs):console.error("Unexpected response format from productApi.getproductList:",r.data)):(r==null?void 0:r.code)===400||(r==null?void 0:r.code)===401?c.error(r==null?void 0:r.message):c.error(r==null?void 0:r.message)}catch(r){c.error(`Error fetching categories ${r}`)}finally{i(!1)}};return{loading:a,getList:l,productList:P,totalPages:b,updateStatus:async(s,n)=>{try{const t=n==="delete"?"delete":s.status===0?"activate":"deactivate";s.status=n==="delete"?s.status:s.status===0?1:0,s.isDelete=n==="delete"?s.isDelete===0?1:0:s.isDelete,D.fire({title:"Are you sure?",text:`You want to ${t} this product?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${t} it!`}).then(async o=>{if(o.isConfirmed){s.productVariant=JSON.stringify(s.productVariant);const e=await f.updateProduct(s,s==null?void 0:s.id);(e==null?void 0:e.code)==200?(c.success(e==null?void 0:e.message),l({page:1,sortBy:"asc ",limit:10,searchBy:"",status:""})):(e==null?void 0:e.code)===400||(e==null?void 0:e.code)===401?c.error(e==null?void 0:e.message):c.error(e==null?void 0:e.message)}})}catch{c.error("Error updating category status")}},getCategoryList:w,categoryList:h,getSubCategoryList:v,subCategoryList:L,getProductVariation:O,optionsList:B}}export{f as p,U as u};
