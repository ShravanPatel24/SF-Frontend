import{r as n,B as i,j as f}from"./index-50ad91ff.js";import{P as v}from"./PageBreadcrumb-2adbd738.js";import{C as x}from"./CustomTable-8273eff0.js";import"./Table-9e7095d0.js";import{U as b}from"./user-12046137.js";import{S as C}from"./sweetalert2.all-c3a7603a.js";import"./Row-a90e51f1.js";import"./Col-6e802f16.js";import"./Anchor-ceb627db.js";import"./Button-825b6efb.js";import"./index-5266a108.js";import"./Card-4e1bc556.js";import"./createWithBsPrefix-d4ec82c8.js";import"./divWithClassName-189ef379.js";import"./Table-b92e9daa.js";import"./Dropdown-3b42b385.js";import"./NavbarContext-4275da30.js";import"./useMergedRefs-e6237522.js";import"./NavContext-578bc096.js";import"./extends-98964cd2.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./useWindow-d34922b0.js";import"./InputGroupContext-cef532f1.js";import"./Button-cbb264fd.js";import"./Badge-ab01f418.js";import"./index-8b12ee39.js";import"./setPrototypeOf-0bb37fbe.js";function A(){const[S,l]=n.useState(!1),[h,y]=n.useState([]),[U,c]=n.useState(1),m=async({page:s,sortBy:a,limit:r,searchBy:u,status:e,type:B})=>{var d,g,o;l(!0);try{const t=await b.getUserList({page:s,sortBy:a,limit:r,searchBy:u,status:e,type:B});(t==null?void 0:t.code)==200?(c((d=t==null?void 0:t.data)==null?void 0:d.totalPages),Array.isArray((g=t==null?void 0:t.data)==null?void 0:g.docs)?y((o=t==null?void 0:t.data)==null?void 0:o.docs):console.error("Unexpected response format from UserService.getUserList:",t.data)):(t==null?void 0:t.code)===400||(t==null?void 0:t.code)===401?i.error(t==null?void 0:t.message):i.error(t==null?void 0:t.message)}catch{i.error("Error fetching users")}finally{l(!1)}};return{loading:S,getList:m,usersList:h,totalPages:U,updateStatus:async(s,a)=>{try{const r=a==="delete"?"delete":s.status===0?"activate":"deactivate";s.status=a==="delete"?s.status:s.status===0?1:0,s.isDelete=a==="delete"?s.isDelete===0?1:0:s.isDelete,C.fire({title:"Are you sure?",text:`You want to ${r} this user?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${r} it!`}).then(async u=>{if(u.isConfirmed){const e=await b.updateUser(s,s==null?void 0:s.id);(e==null?void 0:e.code)==200?(i.success(e==null?void 0:e.message),m({page:1,sortBy:"asc ",limit:10,searchBy:"",status:""})):(e==null?void 0:e.code)===400||(e==null?void 0:e.code)===401?i.error(e==null?void 0:e.message):i.error(e==null?void 0:e.message)}})}catch{i.error("Error updating user status")}}}}const _=()=>{const{loading:S,usersList:l,getList:h,totalPages:y,updateStatus:U}=A(),[c,m]=n.useState(""),[p,s]=n.useState(1),[a,r]=n.useState(""),u=["S.No.","Name","Email","Status","Action"],e=[{value:"",label:"All"},{value:"1",label:"Active"},{value:"0",label:"Inactive"}];n.useEffect(()=>{h({page:p,sortBy:"asc",limit:10,searchBy:encodeURIComponent(c),status:a,type:"user"})},[c,p,a]);const B=o=>{m(o.target.value)},d=o=>{s(o)},g=o=>{r(o)};return f.jsxs(f.Fragment,{children:[f.jsx(v,{title:"Users Tables",subName:"Tables"}),f.jsx(x,{loading:S,data:l,addButtonName:"Add User",navigationUrl:"/users",isImage:"show",columns:u,totalPages:y,pageNumber:p,filterBy:"status",filterValue:e,status:a,isSlug:!1,onPageChange:d,updateStatus:U,changeStatus:g,searchTerm:c,handleInputChange:B,isAction:!0})]})};export{_ as default};
