import{H as y,r as c,B as i,j as h}from"./index-50ad91ff.js";import{P as A}from"./PageBreadcrumb-2adbd738.js";import{C as b}from"./CustomTable-8273eff0.js";import"./Table-9e7095d0.js";import{S as x}from"./sweetalert2.all-c3a7603a.js";import"./Row-a90e51f1.js";import"./Col-6e802f16.js";import"./Anchor-ceb627db.js";import"./Button-825b6efb.js";import"./index-5266a108.js";import"./Card-4e1bc556.js";import"./createWithBsPrefix-d4ec82c8.js";import"./divWithClassName-189ef379.js";import"./Table-b92e9daa.js";import"./Dropdown-3b42b385.js";import"./NavbarContext-4275da30.js";import"./useMergedRefs-e6237522.js";import"./NavContext-578bc096.js";import"./extends-98964cd2.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./useWindow-d34922b0.js";import"./InputGroupContext-cef532f1.js";import"./Button-cbb264fd.js";import"./Badge-ab01f418.js";import"./index-8b12ee39.js";import"./setPrototypeOf-0bb37fbe.js";function Q(){return{addFAQ:s=>y.post("/contact-us",s),getFAQList:s=>y.get(`/contact-us?page=${s.page}&sortBy=${s.sortBy}&limit=${s.limit}&searchBy=${s.searchBy}&status=${s.status}`),getFAQDetails:s=>y.get("/contact-us/"+s),updateFAQ:(s,n)=>y.patch("/contact-us/"+n,s)}}const v=Q();function L(){const[s,n]=c.useState(!1),[S,C]=c.useState([]),[B,l]=c.useState(1),g=async({page:a,sortBy:o,limit:r,searchBy:m,status:u})=>{var e,p,f;n(!0);try{const t=await v.getFAQList({page:a,sortBy:o,limit:r,searchBy:m,status:u});(t==null?void 0:t.code)==200?(l((e=t==null?void 0:t.data)==null?void 0:e.totalPages),Array.isArray((p=t==null?void 0:t.data)==null?void 0:p.docs)?C((f=t==null?void 0:t.data)==null?void 0:f.docs):console.error("Unexpected response format from ContactUsService.getCategoryList:",t.data)):(t==null?void 0:t.code)===400||(t==null?void 0:t.code)===401?i.error(t==null?void 0:t.message):i.error(t==null?void 0:t.message)}catch{i.error("Error fetching categories")}finally{n(!1)}};return{loading:s,getList:g,queriesList:S,totalPages:B,updateStatus:async(a,o)=>{try{const r=o==="delete"?"delete":a.status===0?"activate":"deactivate";a.status=o==="delete"?a.status:a.status===0?1:0,a.isDelete=o==="delete"?a.isDelete===0?1:0:a.isDelete,x.fire({title:"Are you sure?",text:`You want to ${r} this faq?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${r} it!`}).then(async m=>{var u;if(m.isConfirmed){a.categoryId=(u=a.categoryId)==null?void 0:u.id;const e=await v.updateFAQ(a,a==null?void 0:a.id);(e==null?void 0:e.code)==200?(i.success(e==null?void 0:e.message),g({page:1,sortBy:"asc ",limit:10,searchBy:"",status:""})):(e==null?void 0:e.code)===400||(e==null?void 0:e.code)===401?i.error(e==null?void 0:e.message):i.error(e==null?void 0:e.message)}})}catch{i.error("Error updating category status")}}}}const _=()=>{const{loading:s,queriesList:n,getList:S,totalPages:C,updateStatus:B}=L(),[l,g]=c.useState(""),[d,a]=c.useState(1),[o,r]=c.useState(""),m=["S.No.","Name","Email","Message"],u=[{value:"",label:"All"},{value:"1",label:"Active"},{value:"0",label:"Inactive"}];c.useEffect(()=>{S({page:d,sortBy:"asc",limit:10,searchBy:encodeURIComponent(l),status:o})},[l,d,o]);const e=t=>{g(t.target.value)},p=t=>{a(t)},f=t=>{r(t)};return h.jsxs(h.Fragment,{children:[h.jsx(A,{title:"Customer Queries Tables",subName:"Tables"}),h.jsx(b,{loading:s,data:n,addButtonName:"",navigationUrl:"/faq",isImage:"hide",columns:m,totalPages:C,pageNumber:d,filterBy:"",filterValue:u,status:o,isSlug:!1,onPageChange:p,updateStatus:B,changeStatus:f,searchTerm:l,handleInputChange:e,isAction:!1})]})};export{_ as default};
