import{r as h,d as b,i as y,a as L,B as v,j as a,N,L as k}from"./index-50ad91ff.js";import{o as A,c as E,a as x,V as P,F as i}from"./index.esm-200b6112.js";import{A as F}from"./AuthLayout-2592a516.js";import{a as q}from"./auth-d4e0a919.js";import{P as B}from"./PageBreadcrumb-2adbd738.js";import"./Table-9e7095d0.js";import{B as C}from"./Button-cbb264fd.js";import"./Form-57b1e97c.js";import"./index-8b12ee39.js";import"./createWithBsPrefix-d4ec82c8.js";import"./Col-6e802f16.js";import"./InputGroup-5f28fb9e.js";import"./InputGroupContext-cef532f1.js";import"./logo-f3910204.js";import"./Row-a90e51f1.js";import"./Card-4e1bc556.js";import"./divWithClassName-189ef379.js";import"./Image-4e39bf60.js";import"./Anchor-ceb627db.js";import"./Button-825b6efb.js";function I(){const[r,s]=h.useState(!1),t=b(),o=y(),{isAuthenticated:f,saveSession:g}=L(),n=h.useMemo(()=>t.state&&t.state.from?t.state.from.pathname:"/",[t.state]);return{loading:r,login:async({email:j,password:w})=>{var l,m,d,c,p,u;s(!0);try{const e=await q.login({email:j,password:w});e.code===200?(l=e==null?void 0:e.data)!=null&&l.tokens&&((d=(m=e==null?void 0:e.data)==null?void 0:m.tokens)!=null&&d.refresh)&&(g({...((c=e==null?void 0:e.data)==null?void 0:c.admin)??{},token:(u=(p=e==null?void 0:e.data)==null?void 0:p.tokens)==null?void 0:u.refresh}),window.location.reload(),o(n)):v.error(e==null?void 0:e.message)}finally{s(!1)}},redirectUrl:n,isAuthenticated:f}}const S=A(E().shape({email:x().required("Please enter email address"),password:x().required("Please enter Password")})),te=()=>{const{loading:r,login:s,redirectUrl:t,isAuthenticated:o}=I();return a.jsxs(a.Fragment,{children:[a.jsx(B,{title:"Log In"}),o&&a.jsx(N,{to:t,replace:!0}),a.jsx(F,{authTitle:"Sign In",helpText:"Enter your email address and password to access account.",children:a.jsxs(P,{onSubmit:s,resolver:S,defaultValues:{email:"",password:""},children:[a.jsx(i,{label:"Email address",type:"text",name:"email",placeholder:"Enter your email",containerClass:"mb-3",required:!0}),a.jsx(i,{label:"Password",name:"password",type:"password",required:!0,id:"password",placeholder:"Enter your password",containerClass:"mb-3",children:a.jsx(k,{to:"/auth/forgot-password",className:"text-muted float-end",children:a.jsx("small",{children:"Forgot your password?"})})}),a.jsx(i,{label:"Remember me",type:"checkbox",name:"checkbox",containerClass:"mb-3"}),a.jsx("div",{className:"mb-0 text-start",children:a.jsxs(C,{variant:"soft-primary",className:"w-100",type:"submit",disabled:r,children:[a.jsx("i",{className:"ri-login-circle-fill me-1"})," ",a.jsx("span",{className:"fw-bold",children:"Log In"})," "]})})]})})]})};export{te as default};
