import{r as i,B as r,j as f}from"./index-50ad91ff.js";import{P as b}from"./PageBreadcrumb-2adbd738.js";import{C as x}from"./CustomTable-8273eff0.js";import"./Table-9e7095d0.js";import{c as B}from"./category-f2587abd.js";import{S as A}from"./sweetalert2.all-c3a7603a.js";import"./Row-a90e51f1.js";import"./Col-6e802f16.js";import"./Anchor-ceb627db.js";import"./Button-825b6efb.js";import"./index-5266a108.js";import"./Card-4e1bc556.js";import"./createWithBsPrefix-d4ec82c8.js";import"./divWithClassName-189ef379.js";import"./Table-b92e9daa.js";import"./Dropdown-3b42b385.js";import"./NavbarContext-4275da30.js";import"./useMergedRefs-e6237522.js";import"./NavContext-578bc096.js";import"./extends-98964cd2.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./useWindow-d34922b0.js";import"./InputGroupContext-cef532f1.js";import"./Button-cbb264fd.js";import"./Badge-ab01f418.js";import"./index-8b12ee39.js";import"./setPrototypeOf-0bb37fbe.js";function T(){const[y,u]=i.useState(!1),[S,h]=i.useState([]),[C,c]=i.useState(1),l=async({page:a,sortBy:o,limit:s,searchBy:n,status:e})=>{var g,p,d;u(!0);try{const t=await B.getCategoryList({page:a,sortBy:o,limit:s,searchBy:n,status:e});(t==null?void 0:t.code)==200?(c((g=t==null?void 0:t.data)==null?void 0:g.totalPages),Array.isArray((p=t==null?void 0:t.data)==null?void 0:p.docs)?h((d=t==null?void 0:t.data)==null?void 0:d.docs):console.error("Unexpected response format from categoryApi.getCategoryList:",t.data)):(t==null?void 0:t.code)===400||(t==null?void 0:t.code)===401?r.error(t==null?void 0:t.message):r.error(t==null?void 0:t.message)}catch{r.error("Error fetching categories")}finally{u(!1)}};return{loading:y,getList:l,categoryList:S,totalPages:C,updateStatus:async(a,o)=>{try{const s=o==="delete"?"delete":a.status===0?"activate":"deactivate";a.status=o==="delete"?a.status:a.status===0?1:0,a.isDelete=o==="delete"?a.isDelete===0?1:0:a.isDelete,A.fire({title:"Are you sure?",text:`You want to ${s} this business type?`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:`Yes, ${s} it!`}).then(async n=>{if(n.isConfirmed){const e=await B.updateCategory(a,a==null?void 0:a.id);(e==null?void 0:e.code)==200?(r.success(e==null?void 0:e.message),l({page:1,sortBy:"asc ",limit:10,searchBy:"",status:""})):(e==null?void 0:e.code)===400||(e==null?void 0:e.code)===401?r.error(e==null?void 0:e.message):r.error(e==null?void 0:e.message)}})}catch{r.error("Error updating category status")}}}}const Z=()=>{const{loading:y,categoryList:u,getList:S,totalPages:h,updateStatus:C}=T(),[c,l]=i.useState(""),[m,a]=i.useState(1),[o,s]=i.useState(""),n=["S.No.","Name","Status","Action"],e=[{value:"",label:"All"},{value:"1",label:"Active"},{value:"0",label:"Inactive"}];i.useEffect(()=>{S({page:m,sortBy:"asc",limit:10,searchBy:encodeURIComponent(c),status:o})},[c,m,o]);const g=t=>{l(t.target.value)},p=t=>{a(t)},d=t=>{s(t)};return f.jsxs(f.Fragment,{children:[f.jsx(b,{title:"Business Type Tables",subName:"Tables"}),f.jsx(x,{loading:y,data:u,addButtonName:"Add Business Type",navigationUrl:"/business-type",isImage:"hide",columns:n,totalPages:h,pageNumber:m,filterBy:"status",filterValue:e,status:o,isSlug:!1,onPageChange:p,updateStatus:C,changeStatus:d,searchTerm:c,handleInputChange:g,isAction:!0})]})};export{Z as default};
