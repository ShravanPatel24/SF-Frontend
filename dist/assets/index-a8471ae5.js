import{r as f,j as e,f as H,e as W,a as Ie,i as Se,L as z,B}from"./index-50ad91ff.js";import{S as Z}from"./Spinner-57400a8f.js";import{a as $e}from"./placeholder-d2367983.js";import{a as Y}from"./auth-d4e0a919.js";import{R as L}from"./Row-a90e51f1.js";import{C as I}from"./Col-6e802f16.js";import{I as Ke}from"./Image-4e39bf60.js";import{a as Ae,C as J}from"./Card-4e1bc556.js";import{P as S}from"./index-8b12ee39.js";import{S as A,N as ne,m as q,a as Re,b as Le,u as ke,$ as qe}from"./NavContext-578bc096.js";import{N as ae,F as re}from"./NoopTransition-46c5a6f4.js";import{c as se}from"./createWithBsPrefix-d4ec82c8.js";import{d as _,a as Be,q as Fe,N as De}from"./NavbarContext-4275da30.js";import{u as Ve}from"./useMergedRefs-e6237522.js";import{u as Ue,B as Me}from"./Button-825b6efb.js";import{A as Ge}from"./Anchor-ceb627db.js";import{F as j}from"./Form-57b1e97c.js";import{B as F}from"./Button-cbb264fd.js";import{I as Q}from"./InputGroup-5f28fb9e.js";import"./divWithClassName-189ef379.js";import"./extends-98964cd2.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./TransitionWrapper-09c32c32.js";import"./setPrototypeOf-0bb37fbe.js";import"./InputGroupContext-cef532f1.js";const He=f.createContext(null),R=He,We=["as","active","eventKey"];function _e(t,r){if(t==null)return{};var s={},c=Object.keys(t),a,n;for(n=0;n<c.length;n++)a=c[n],!(r.indexOf(a)>=0)&&(s[a]=t[a]);return s}function oe({key:t,onClick:r,active:s,id:c,role:a,disabled:n}){const i=f.useContext(A),d=f.useContext(ne),l=f.useContext(R);let p=s;const u={role:a};if(d){!a&&d.role==="tablist"&&(u.role="tab");const m=d.getControllerId(t??null),x=d.getControlledId(t??null);u[_("event-key")]=t,u.id=m||c,p=s==null&&t!=null?d.activeKey===t:s,(p||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=x)}return u.role==="tab"&&(u["aria-selected"]=p,p||(u.tabIndex=-1),n&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Ue(m=>{n||(r==null||r(m),t!=null&&i&&!m.isPropagationStopped()&&i(t,m))}),[u,{isActive:p}]}const ie=f.forwardRef((t,r)=>{let{as:s=Me,active:c,eventKey:a}=t,n=_e(t,We);const[i,d]=oe(Object.assign({key:q(a,n.href),active:c},n));return i[_("active")]=d.isActive,e.jsx(s,Object.assign({},n,i,{ref:r}))});ie.displayName="NavItem";const ze=ie,Ze=["as","onSelect","activeKey","role","onKeyDown"];function Ye(t,r){if(t==null)return{};var s={},c=Object.keys(t),a,n;for(n=0;n<c.length;n++)a=c[n],!(r.indexOf(a)>=0)&&(s[a]=t[a]);return s}const X=()=>{},ee=_("event-key"),le=f.forwardRef((t,r)=>{let{as:s="div",onSelect:c,activeKey:a,role:n,onKeyDown:i}=t,d=Ye(t,Ze);const l=Re(),p=f.useRef(!1),u=f.useContext(A),m=f.useContext(R);let x,v;m&&(n=n||"tablist",a=m.activeKey,x=m.getControlledId,v=m.getControllerId);const h=f.useRef(null),g=C=>{const E=h.current;if(!E)return null;const w=Fe(E,`[${ee}]:not([aria-disabled=true])`),$=E.querySelector("[aria-selected=true]");if(!$||$!==document.activeElement)return null;const K=w.indexOf($);if(K===-1)return null;let T=K+C;return T>=w.length&&(T=0),T<0&&(T=w.length-1),w[T]},b=(C,E)=>{C!=null&&(c==null||c(C,E),u==null||u(C,E))},N=C=>{if(i==null||i(C),!m)return;let E;switch(C.key){case"ArrowLeft":case"ArrowUp":E=g(-1);break;case"ArrowRight":case"ArrowDown":E=g(1);break;default:return}E&&(C.preventDefault(),b(E.dataset[Be("EventKey")]||null,C),p.current=!0,l())};f.useEffect(()=>{if(h.current&&p.current){const C=h.current.querySelector(`[${ee}][aria-selected=true]`);C==null||C.focus()}p.current=!1});const O=Ve(r,h);return e.jsx(A.Provider,{value:b,children:e.jsx(ne.Provider,{value:{role:n,activeKey:q(a),getControlledId:x||X,getControllerId:v||X},children:e.jsx(s,Object.assign({},d,{onKeyDown:N,ref:O,role:n}))})})});le.displayName="Nav";const Je=Object.assign(le,{Item:ze});var te={exports:{}},M={exports:{}};(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=s;function s(c){function a(i,d,l,p,u,m){var x=p||"<<anonymous>>",v=m||l;if(d[l]==null)return i?new Error("Required "+u+" `"+v+"` was not specified "+("in `"+x+"`.")):null;for(var h=arguments.length,g=Array(h>6?h-6:0),b=6;b<h;b++)g[b-6]=arguments[b];return c.apply(void 0,[d,l,x,u,v].concat(g))}var n=a.bind(null,!1);return n.isRequired=a.bind(null,!0),n}t.exports=r.default})(M,M.exports);var Qe=M.exports;(function(t,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=n;var s=Qe,c=a(s);function a(i){return i&&i.__esModule?i:{default:i}}function n(){for(var i=arguments.length,d=Array(i),l=0;l<i;l++)d[l]=arguments[l];function p(){for(var u=arguments.length,m=Array(u),x=0;x<u;x++)m[x]=arguments[x];var v=null;return d.forEach(function(h){if(v==null){var g=h.apply(void 0,m);g!=null&&(v=g)}}),v}return(0,c.default)(p)}t.exports=r.default})(te,te.exports);const Xe=se("nav-item"),ce=f.forwardRef(({bsPrefix:t,className:r,as:s=Ge,active:c,eventKey:a,disabled:n=!1,...i},d)=>{t=H(t,"nav-link");const[l,p]=oe({key:q(a,i.href),active:c,disabled:n,...i});return e.jsx(s,{...i,...l,ref:d,disabled:n,className:W(r,t,n&&"disabled",p.isActive&&"active")})});ce.displayName="NavLink";const et=ce,de=f.forwardRef((t,r)=>{const{as:s="div",bsPrefix:c,variant:a,fill:n=!1,justify:i=!1,navbar:d,navbarScroll:l,className:p,activeKey:u,...m}=Le(t,{activeKey:"onSelect"}),x=H(c,"nav");let v,h,g=!1;const b=f.useContext(De),N=f.useContext(Ae);return b?(v=b.bsPrefix,g=d??!0):N&&({cardHeaderBsPrefix:h}=N),e.jsx(Je,{as:s,ref:r,activeKey:u,className:W(p,{[x]:!g,[`${v}-nav`]:g,[`${v}-nav-scroll`]:g&&l,[`${h}-${a}`]:!!h,[`${x}-${a}`]:!!a,[`${x}-fill`]:n,[`${x}-justified`]:i}),...m})});de.displayName="Nav";const k=Object.assign(de,{Item:Xe,Link:et}),tt=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],nt=["activeKey","getControlledId","getControllerId"],at=["as"];function G(t,r){if(t==null)return{};var s={},c=Object.keys(t),a,n;for(n=0;n<c.length;n++)a=c[n],!(r.indexOf(a)>=0)&&(s[a]=t[a]);return s}function ue(t){let{active:r,eventKey:s,mountOnEnter:c,transition:a,unmountOnExit:n,role:i="tabpanel",onEnter:d,onEntering:l,onEntered:p,onExit:u,onExiting:m,onExited:x}=t,v=G(t,tt);const h=f.useContext(R);if(!h)return[Object.assign({},v,{role:i}),{eventKey:s,isActive:r,mountOnEnter:c,transition:a,unmountOnExit:n,onEnter:d,onEntering:l,onEntered:p,onExit:u,onExiting:m,onExited:x}];const{activeKey:g,getControlledId:b,getControllerId:N}=h,O=G(h,nt),C=q(s);return[Object.assign({},v,{role:i,id:b(s),"aria-labelledby":N(s)}),{eventKey:s,isActive:r==null&&C!=null?q(g)===C:r,transition:a||O.transition,mountOnEnter:c??O.mountOnEnter,unmountOnExit:n??O.unmountOnExit,onEnter:d,onEntering:l,onEntered:p,onExit:u,onExiting:m,onExited:x}]}const me=f.forwardRef((t,r)=>{let{as:s="div"}=t,c=G(t,at);const[a,{isActive:n,onEnter:i,onEntering:d,onEntered:l,onExit:p,onExiting:u,onExited:m,mountOnEnter:x,unmountOnExit:v,transition:h=ae}]=ue(c);return e.jsx(R.Provider,{value:null,children:e.jsx(A.Provider,{value:null,children:e.jsx(h,{in:n,onEnter:i,onEntering:d,onEntered:l,onExit:p,onExiting:u,onExited:m,mountOnEnter:x,unmountOnExit:v,children:e.jsx(s,Object.assign({},a,{ref:r,hidden:!n,"aria-hidden":!n}))})})})});me.displayName="TabPanel";const fe=t=>{const{id:r,generateChildId:s,onSelect:c,activeKey:a,defaultActiveKey:n,transition:i,mountOnEnter:d,unmountOnExit:l,children:p}=t,[u,m]=ke(a,n,c),x=qe(r),v=f.useMemo(()=>s||((g,b)=>x?`${x}-${b}-${g}`:null),[x,s]),h=f.useMemo(()=>({onSelect:m,activeKey:u,transition:i,mountOnEnter:d||!1,unmountOnExit:l||!1,getControlledId:g=>v(g,"tabpane"),getControllerId:g=>v(g,"tab")}),[m,u,i,d,l,v]);return e.jsx(R.Provider,{value:h,children:e.jsx(A.Provider,{value:m||null,children:p})})};fe.Panel=me;const rt=fe;function pe(t){return typeof t=="boolean"?t?re:ae:t}const xe=({transition:t,...r})=>e.jsx(rt,{...r,transition:pe(t)});xe.displayName="TabContainer";const st=xe,ot=se("tab-content"),ve=f.forwardRef(({bsPrefix:t,transition:r,...s},c)=>{const[{className:a,as:n="div",...i},{isActive:d,onEnter:l,onEntering:p,onEntered:u,onExit:m,onExiting:x,onExited:v,mountOnEnter:h,unmountOnExit:g,transition:b=re}]=ue({...s,transition:pe(r)}),N=H(t,"tab-pane");return e.jsx(R.Provider,{value:null,children:e.jsx(A.Provider,{value:null,children:e.jsx(b,{in:d,onEnter:l,onEntering:p,onEntered:u,onExit:m,onExiting:x,onExited:v,mountOnEnter:h,unmountOnExit:g,children:e.jsx(n,{...i,ref:c,className:W(a,N,d&&"active")})})})})});ve.displayName="TabPane";const it=ve,lt={eventKey:S.oneOfType([S.string,S.number]),title:S.node.isRequired,disabled:S.bool,tabClassName:S.string,tabAttrs:S.object},he=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};he.propTypes=lt;const D=Object.assign(he,{Container:st,Content:ot,Pane:it}),ct="/assets/bg-profile-38acc387.jpg",Lt=()=>{const{user:t,removeSession:r,saveSession:s}=Ie(),[c,a]=f.useState(!1),[n,i]=f.useState(!1),[d,l]=f.useState(!1),[p,u]=f.useState(t==null?void 0:t.name),[m,x]=f.useState(t==null?void 0:t.email),[v,h]=f.useState(""),[g,b]=f.useState(""),[N,O]=f.useState(""),[C,E]=f.useState(""),[w,$]=f.useState(""),[K,T]=f.useState(!1),ge=Se(),be=/^[a-zA-Z\s]+$/,Ce=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,je=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,15}$/,ye=y=>{const P=y.target.value;u(P),P&&!be.test(P)?h("Please enter a valid name."):h("")},Ee=y=>{const P=y.target.value;x(P),Ce.test(P)?b(""):b("Please enter a valid email.")},Pe=async y=>{if(y.preventDefault(),y.stopPropagation(),y.currentTarget.checkValidity()===!1||v||g)a(!0);else{l(!0);try{const V={name:p,email:m},o=await Y.updateProfile(V,t==null?void 0:t.id);if(console.log("res",o==null?void 0:o.code),(o==null?void 0:o.code)===200){l(!1),B.success(o==null?void 0:o.message);let U=t;U.name=p,U.email=m,r(),s(U),window.location.reload()}else((o==null?void 0:o.code)===400||(o==null?void 0:o.code)===401)&&B.error(o==null?void 0:o.message)}finally{l(!1)}}},Ne=y=>{const P=y.target.value;O(P)},we=y=>{const P=y.target.value;E(P),je.test(P)?$(""):$("Password must be 8-15 characters long and include at least one letter, one number, and one special character.")},Oe=async y=>{if(y.preventDefault(),y.stopPropagation(),y.currentTarget.checkValidity()===!1||w)i(!0);else{l(!0);try{const V={oldPassword:N,password:C},o=await Y.updateProfile(V,t==null?void 0:t.id);console.log("res",o==null?void 0:o.code),(o==null?void 0:o.code)===200?(l(!1),B.success(o==null?void 0:o.message),r(),localStorage.removeItem("_VELONIC_AUTH"),window.location.reload(),ge("/auth/logout")):((o==null?void 0:o.code)===400||(o==null?void 0:o.code)===401)&&B.error(o==null?void 0:o.message)}finally{l(!1)}}},Te=()=>{T(!K)};return e.jsx(e.Fragment,{children:e.jsxs("div",{children:[e.jsx(L,{children:e.jsxs(I,{sm:12,children:[e.jsx("div",{className:"profile-bg-picture",style:{backgroundImage:`url(${ct})`},children:e.jsx("span",{className:"picture-bg-overlay"})}),e.jsx("div",{className:"profile-user-box",children:e.jsx(L,{children:e.jsxs(I,{sm:6,children:[e.jsx("div",{className:"profile-user-img",children:e.jsx(Ke,{src:$e,className:"avatar-lg rounded-circle",alt:"user"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"mt-4 fs-17 ellipsis",children:t==null?void 0:t.name}),e.jsxs("p",{className:"font-13",children:[" ",t==null?void 0:t.email]})]})]})})})]})}),e.jsx(L,{children:e.jsx(I,{sm:12,children:e.jsx(J,{className:"p-0",children:e.jsx(J.Body,{className:"p-0",children:e.jsx("div",{className:"profile-content",children:e.jsxs(D.Container,{defaultActiveKey:"Settings",children:[e.jsxs(k,{as:"ul",justify:!0,className:"nav-underline gap-0",children:[e.jsx(k.Item,{children:e.jsx(k.Link,{as:z,type:"button",to:"#",eventKey:"Settings",children:"Profile"})}),e.jsx(k.Item,{children:e.jsx(k.Link,{as:z,type:"button",to:"#",eventKey:"ChangePassword",children:"Change Password"})})]}),e.jsxs(D.Content,{className:"m-0 p-4",children:[e.jsx(D.Pane,{eventKey:"Settings",id:"edit-profile",children:e.jsx("div",{className:"user-profile-content",children:e.jsxs(j,{noValidate:!0,validated:c,onSubmit:Pe,children:[e.jsxs(L,{children:[e.jsx(I,{lg:6,children:e.jsxs(j.Group,{className:"mb-3",children:[e.jsx(j.Label,{children:"Full Name"}),e.jsx(j.Control,{name:"fullName",placeholder:"Full Name",type:"text",id:"validationCustom01",value:p,onChange:ye,required:!0,isInvalid:!!v}),e.jsx(j.Control.Feedback,{type:"invalid",children:v||"Please fill the full name."})]})}),e.jsx(I,{lg:6,children:e.jsxs(j.Group,{className:"mb-3",children:[e.jsx(j.Label,{children:"Email"}),e.jsx(j.Control,{name:"email",placeholder:"Email",type:"text",value:m,onChange:Ee,required:!0,isInvalid:!!g}),e.jsx(j.Control.Feedback,{type:"invalid",children:g||"Please fill the email."})]})})]}),d?e.jsxs(F,{variant:"primary",disabled:!0,children:[e.jsx(Z,{className:"spinner-border-sm",tag:"span",color:"white"})," ","Loading..."]}):e.jsx(F,{variant:"primary",type:"submit",disabled:d,children:"Submit"})]})})}),e.jsx(D.Pane,{eventKey:"ChangePassword",id:"change-password",children:e.jsx("div",{className:"user-profile-content",children:e.jsxs(j,{noValidate:!0,validated:n,onSubmit:Oe,children:[e.jsxs(L,{className:"row-cols-sm-2 row-cols-1",children:[e.jsx(I,{lg:6,children:e.jsxs(j.Group,{className:"mb-3",children:[e.jsx(j.Label,{children:"Old Password"}),e.jsx(j.Control,{name:"Password",type:"password",placeholder:"8 - 15 Characters",value:N,onChange:Ne,required:!0})]})}),e.jsx(I,{lg:6,children:e.jsxs(j.Group,{className:"mb-3",children:[e.jsx(j.Label,{children:"New Password"}),e.jsxs(Q,{children:[e.jsx(j.Control,{name:"Password2",type:K?"text":"password",placeholder:"8 - 15 Characters",value:C,onChange:we,required:!0,isInvalid:!!w}),e.jsx(Q.Text,{onClick:Te,children:e.jsx("a",{className:K?"ri-eye-off-line":"ri-eye-line"})}),e.jsx(j.Control.Feedback,{type:"invalid",children:w||"Please fill the re-password."})]})]})})]}),d?e.jsxs(F,{variant:"primary",disabled:!0,children:[e.jsx(Z,{className:"spinner-border-sm",tag:"span",color:"white"})," ","Loading..."]}):e.jsx(F,{variant:"primary",type:"submit",children:"Submit"})]})})})]})]})})})})})})]})})};export{Lt as default};
